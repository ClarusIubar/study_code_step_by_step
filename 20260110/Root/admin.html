<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>관리자 모드 - 자판기 뒷면</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
    <py-config>
        packages = ["pydantic"]
        [[fetch]]
        files = ["core/model.py", "domain/product.py", "domain/memo.py", "repository/repository.py", "service/vendingmachine.py", "app/admin.py", "products.json"]
    </py-config>
</head>
<body class="admin-body">
    <div class="container">
        <div class="main-view" style="flex: 2;">
            <h2 style="color: #ffc107; border-bottom: 2px solid #ffc107; padding-bottom: 10px; margin-top: 0;">자판기 뒷면 (재고 관리 시스템)</h2>
            <div id="admin-grid" class="grid-6x6 admin-grid"></div>
            
            <div class="nav-bar" style="margin-top: 20px;">
                <button onclick="location.href='index.html'" style="padding: 12px 25px; background: #007bff; color: #fff; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.3);">사용자 모드 전환 (앞면)</button>
            </div>
        </div>

        <div class="side-panel">
            <div class="box" style="background: #333; color: #fff; border-color: #ffc107;">
                <h3>매출 현황 및 회수</h3>
                <div id="revenue-display" class="display-screen" style="color: #ffc107; font-size: 32px; border: 2px solid #444;">0원</div>
                <button id="collect-btn" class="full-button" style="background: #28a745; color: #fff;">판매 수익금 전액 회수</button>
            </div>
            
            <div class="box" style="background: #333; color: #fff; border-color: #444;">
                <h3>관리자 안내</h3>
                <p style="font-size: 12px; color: #aaa;">* 재고 보충은 상품당 최대 10개까지 가능합니다.</p>
                <p style="font-size: 12px; color: #aaa;">* 수익금 회수 시 내부 금고 잔액이 0으로 초기화됩니다.</p>
                <p style="font-size: 12px; color: #aaa;">* 모든 변경 사항은 실시간으로 저장됩니다.</p>
            </div>
        </div>
    </div>
    <div id="log-bar" class="status-bar" style="background: #000; border-top: 2px solid #ffc107; color: #ffc107;">> 관리자 보안 세션 활성화됨</div>
    <script type="py">import asyncio; from app.admin import init_admin; asyncio.ensure_future(init_admin())</script>
</body>
</html>